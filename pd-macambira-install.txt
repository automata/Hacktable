# Dependência
sudo apt-get install -y autoconf automake libtool libfftw3-dev libsndfile1-dev liblua5.1-0-dev tcl8.5-dev swig ladspa-sdk libspeex-dev libmp3lame-dev libgl1-mesa-dev mesa-utils libglu1-mesa libglu1-mesa-dev libgsl0-dev tcllib cheese libasound2-dev

# Pré requisitos se quiser obter repos oficiais
# sudo apt-get install git-svn

#dependências para o som - extra
sudo apt-get install -y autoconf automake qjackctl

# Desinstale tudo que for pacote pure-data do ubuntu
# sudo apt-get install synaptic
# synaptic

mkdir pd-repos
cd pd-repos

# Core do pd-extended
git clone git://pure-data.git.sourceforge.net/gitroot/pure-data/pd-extended.git
# ***
# pd-svn
# git svn clone https://pure-data.svn.sourceforge.net/svnroot/pure-data/trunk pd-svn
 
# pd-svn do repositório Macambira
git clone git://github.com/rfabbri/pd-macambira.git

# ***
# Gem do repositório
# git clone git://pd-gem.git.sourceforge.net/gitroot/pd-gem/Gem gem.git

# Gem do Lab Macambira: para coisas mais experimentais - desnecessario
# atualmente pois a maioria das coisas estao no repo oficial
 git clone git://github.com/rfabbri/Gem.git gem.git
# ******

cd pd-macambira/
mv pd pd-original
ln -s ../pd-extended pd


ln -s ../gem.git Gem
cd externals
ln -s ../../gem.git Gem

cd .. 
# dentro do pd-macambira
cd packages/linux_make
make install && make package

sudo dpkg -i Pd-*.deb

# Depois de tudo

# vai ao pd-repos
cd ../../../

# clona a AirHackTable
git clone git://github.com/wakku/Hacktable.git hacktable

# atualizar
# git pull

# pega deteccao de cor (branch hacktable) : desnecessario atualmente - ja tem
# direto no repo oficial
cd gem.git
git checkout remotes/origin/hacktable
git checkout -b hacktable

# repetir
# adicionei aqui. É preciso testar.
cd ..
cd pd-macambira
cd packages/linux_make
make install && make package

# desinstalar todos os pacotes puredata e gem que vem com o ubuntu

# instalar o novo pacote
sudo dpkg -i Pd-*.deb


# para atualizar

# Caso seja necessário dar um update no Gem apenas
sudo mv /usr/lib/pd-extended/extra/Gem /usr/lib/pd-extended/extra/Gem-original
cd ~/pd-repos/pd-macambira/externals/build/lib/pd-extended/extra/Gem
sudo ln -s $PWD /usr/lib/pd-extended/extra/Gem
make
# vai ao pd-repos/pd-macambira/externals
cd .. 
make gem_install

# adiciona usuario ao grupo video
sudo gpasswd -a [user] video

# repositorio de utilitario
git clone git@github.com:rfabbri/pd-macambira-utils.git

# repositorio de coisas diversas do gilson beck

#git clone https://github.com/gilsonbeck/beck-repo.git

git clone https://github.com/rfabbri/beck-repo.git


